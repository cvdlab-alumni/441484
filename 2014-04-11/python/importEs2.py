from importEs1 import *



fl1 =  POLYLINE([[6.23,30.4],[6.23,27.95],[2.51,27.95],[2.51,22.27],[6.23,22.27],[6.23,18.48],[5.68,18.48],[5.68,15.95],[5.13,15.95],[5.13,15.4],[5.68,15.4],[5.68,13.42],[5.13,13.42],[5.13,12.87],[5.68,12.87],[5.68,10.89],[5.13,10.89],[5.13,10.34],[5.68,10.34],[5.68,7.81],[5.13,7.81],[5.13,7.26],[5.68,7.26],[5.68,4.73],[5.13,4.73],[5.13,4.18],[5.68,4.18],[5.68,1.1],[5.13,1.1],[5.13,0.55],[5.68,0.55],[5.68,0],[6.23,0],[6.23,0.55],[11.23,0.55],[11.23,0],[15.03,0],[15.03,0.55],[20.03,0.55],[20.03,0],[20.58,0],[20.58,0.55],[21.13,0.55],[21.13,1.1],[20.58,1.1],[20.58,15.95],[21.13,15.95],[21.13,15.4],[20.58,15.4],[20.58,13.42],[21.13,13.42],[21.13,12.87],[20.58,12.87],[20.58,10.89],[21.13,10.89],[21.13,10.34],[20.58,10.34],[20.58,7.81],[21.13,7.81],[21.13,7.26],[20.58,7.26],[20.58,4.73],[21.13,4.73],[21.13,4.18],[20.58,4.18],[20.58,18.48],[21.84,18.48],[21.84,21.78],[26.75,21.78],[26.75,22.33],[26.2,22.33],[25.65,28.37],[25.65,30.41],[26,30.41],[26,30.76],[25.13,30.76],[25.13,29.22],[20.58,29.22],[20.58,30.4]])
GRID = COMP([INSR(PROD),AA(QUOTE)])


def ring(r,R):
	def circle (r):
		def c(p):
			return [r*math.cos(p[0]),r*math.sin(p[0])]
		return c
	esterno = MAP(circle(R))(dom)
	interno = MAP(circle(r))(dom)	
	return STRUCT([esterno,interno])

floor2cont =  POLYLINE([[6.78,30.4],[6.23,30.4],[6.23,27.95],[2.51,27.95],[2.51,22.27],[6.23,22.27],[6.23,18.48],[5.68,18.48],[5.68,15.95],[5.13,15.95],[5.13,15.4],[5.68,15.4],[5.68,13.42],[5.13,13.42],[5.13,12.87],[5.68,12.87],[5.68,10.89],[5.13,10.89],[5.13,10.34],[5.68,10.34],[5.68,7.81],[5.13,7.81],[5.13,7.26],[5.68,7.26],[5.68,4.73],[5.13,4.73],[5.13,4.18],[5.68,4.18],[5.68,1.1],[5.13,1.1],[5.13,0.55],[5.68,0.55],[5.68,0],[6.23,0],[6.23,0.55],[11.23,0.55],[11.23,0],[12.23,0],[12.23,0.55],[12.53,0.55],[12.53,1.1],[9.86,1.1],[9.86,1.65],[9.31,1.65],[9.31,1.1],[6.23,1.1],[6.23,4.18],[6.78,4.18],[6.78,4.73],[6.23,4.73],[6.23,7.26],[6.78,7.26],[6.78, 7.81],[6.23,7.81],[6.23,10.34],[6.78,10.34],[6.78,10.89],[6.23,10.89],[6.23,15.35],[6.78,15.35],[6.78,15.9],[6.23,15.9],[6.23,17.86],[6.78,17.86],[6.78,24.67],[6.23,24.67],[6.23,24.12],[5.68,24.12],[5.68,23.28],[4.28,23.28],[4.28,24.12],[3.73,24.12],[3.73,24.67],[3,24.67],[3,26.07],[3.73,26.07], [3.73,26.62],[4.28,26.62],[4.28,27.2],[5.68,27.2], [5.68, 26.62],[6.23,26.62],[6.23,26.07], [6.78,26.07],[6.78,30.4]])



circ1 = SOLIDIFY(ring(6.3,6.9))  # SEMICERCHIO GRANDE STRUTTURA
circ1=T([1,2])([13.1,30.4])(circ1)

CIRC1=MAP(circle(6.9))(dom2)
CIRC1=T([1,2])([13.1,30.4])(CIRC1)



floor2cont3 = (STRUCT([floor2cont2,floor2cont3,floor2cont5,floor2cont4]))

floor2cont3=SOLIDIFY(floor2cont3)


q =QUOTE([3])
qq=QUOTE([1, -1.8, 1])
aa= PROD([qq,q])
a =  POLYLINE([[0.55,0],[0.55,6],[3.55,7],[3.55,9],[7.45,10],[11.35,9],[11.35,7],[14.35,6],[14.35,0],[0.55,0]])
aaa=POLYLINE([[0.55,0],[14.9,0]])
aa= T(1)(5.55)(aa)

qt= T([1, 2])([5.55,3])(q)
qs=R([1,2])(PI/2)(q)
pair_xy = [T(2)(-1), qt]
houseRowxy = STRUCT(NN(1)(pair_xy))



def circle (r):
	def circ (p):
		return ([r*COS(p[0]),r*SIN(p[0])])
	return circ






a=SOLIDIFY(a)


fin=GRID([[0.4],[2]])

finc=MAP(circle(0.2))(dom)
finc=JOIN(finc)
finc=T([1,2])([0.2,2])(finc)
finc=STRUCT([fin,finc])
finc=T([1,2])([7.5,6])(finc)


porta=GRID([[1.8],[2]])
porta=T([1,2])([6.55,0])(porta)



a = DIFFERENCE([a, finc, porta])


a=PROD([a,Q(0.1)])


FACCIATA = STRUCT([a,aa,qt,houseRowxy,houseRowxyz2, fil,aaa, circ0, CIL,CIL2])





CIRC3=JOIN(CIRC3)


circ3 = PROD([CIRC3,Q(3)])


CIRC5=JOIN(CIRC5)



circ5 = PROD([CIRC5,Q(3)])



CIRC4=JOIN(CIRC4)


circ4 = PROD([CIRC4,Q(3)])



floor2cont2 =  POLYLINE([[19.95,0.55],[19.95,4.18],[19.4,4.18],[19.4,4.73],[19.95,4.73],[19.95,7.26],[19.4,7.26],[19.4,7.81],[19.95,7.81],[19.95,10.34],[19.4,10.34],[19.4,10.89],[19.95,10.89],[19.95,15.4],[19.4,15.4],[19.4,15.95],[19.95,15.95],[19.95,18.4],[19.4,18.4],[19.4,25.56],[19.95,25.56],[19.95,22.4],[25.21,22.4],[24.66,28.44],[24.11,28.44],[24.11,29.22],[25,29.22]])
floor2cont3 =  POLYLINE([[19.95,0.55],[19.95,0],[20.58,0],[20.58,0.55],[21.13,0.55],[21.13,1.1],[20.58,1.1],[20.58,15.95],[21.13,15.95],[21.13,15.4],[20.58,15.4],[20.58,13.42],[21.13,13.42],[21.13,12.87],[20.58,12.87],[20.58,10.89],[21.13,10.89],[21.13,10.34],[20.58,10.34],[20.58,7.81],[21.13,7.81],[21.13,7.26],[20.58,7.26],[20.58,4.73],[21.13,4.73],[21.13,4.18],[20.58,4.18],[20.58,18.48],[21.84,18.48],[21.84,21.78],[26.75,21.78],[26.75,22.33],[26.2,22.33],[25.65,28.37],[25.65,30.41],[26,30.41],[26,30.76],[25.13,30.76],[25.13,29.22]])


floor2cont4 = POLYLINE([[22.1,29.22],[22.1,28.44],[21.2,28.44],[21.2,27.89],[19.95,27.89],[19.95,27.34],[19.4,27.34],[19.4,27.89],[18.85,27.89],[18.85,28.44],[19.4,28.44],[19.4,30.7]])
floor2cont5 = POLYLINE([[22.1,29.22],[20,29.22],[20,30.7],[19.4,30.7]])


floor2cont3 = (STRUCT([floor2cont2,floor2cont3,floor2cont5,floor2cont4]))

floor2cont3=SOLIDIFY(floor2cont3)

floor2cont3=T(1)(-5.8)(floor2cont3)

east = STRUCT([LATO, MURO,MURO2, MURO3,MURO4, T(2)(5.68)(MURO3),MURETTO,TORRE])

FACCIATA=R([2,3])(PI/2)(FACCIATA)



nord=T(1)(-0.4)(FACCIATA)

CIRC2=MAP(circle(1.97))(dom)

circ2 = T([1,2])([17.1,29.22])(CIRC2)
circ2= JOIN(circ2)
circ2=PROD([circ2,Q(6)])

fl0 = GRID([[28],[40]])
fl0=T([1,2])([-5,-0.55])(fl0)

west = PROD([floor2cont3,Q(6)])

sud = STRUCT([circBIG,circ2, circ5, circ4, circ3])



muretto = POLYLINE([[6.23,30.7],[6.23,27.95], [5.68,27.95],[5.68,30.7],[6.23,30.7]])
muretto = SOLIDIFY(muretto)
muretto = PROD([muretto, Q(6)])
muretto= T(1)(-5.65)(muretto)



TORRE= COLOR([0.67,1.47,0.93])(TORRE)

facciateLaterali = STRUCT([nord ,east,west,sud, muretto])

facciateLaterali = COLOR([0, 0.498,1])(facciateLaterali)


mock_up_3D = STRUCT([fl0, facciateLaterali, TORRE])



solid_model_3D = STRUCT([mock_up_3D, tettoFinale, tettoNavataLat])