from pyplasm import *

fl1 =  POLYLINE([[6.23,30.4],[6.23,27.95],[2.51,27.95],[2.51,22.27],[6.23,22.27],[6.23,18.48],[5.68,18.48],[5.68,15.95],[5.13,15.95],[5.13,15.4],[5.68,15.4],[5.68,13.42],[5.13,13.42],[5.13,12.87],[5.68,12.87],[5.68,10.89],[5.13,10.89],[5.13,10.34],[5.68,10.34],[5.68,7.81],[5.13,7.81],[5.13,7.26],[5.68,7.26],[5.68,4.73],[5.13,4.73],[5.13,4.18],[5.68,4.18],[5.68,1.1],[5.13,1.1],[5.13,0.55],[5.68,0.55],[5.68,0],[6.23,0],[6.23,0.55],[11.23,0.55],[11.23,0],[15.03,0],[15.03,0.55],[20.03,0.55],[20.03,0],[20.58,0],[20.58,0.55],[21.13,0.55],[21.13,1.1],[20.58,1.1],[20.58,15.95],[21.13,15.95],[21.13,15.4],[20.58,15.4],[20.58,13.42],[21.13,13.42],[21.13,12.87],[20.58,12.87],[20.58,10.89],[21.13,10.89],[21.13,10.34],[20.58,10.34],[20.58,7.81],[21.13,7.81],[21.13,7.26],[20.58,7.26],[20.58,4.73],[21.13,4.73],[21.13,4.18],[20.58,4.18],[20.58,18.48],[21.84,18.48],[21.84,21.78],[26.75,21.78],[26.75,22.33],[26.2,22.33],[25.65,28.37],[25.65,30.41],[26,30.41],[26,30.76],[25.13,30.76],[25.13,29.22],[20.58,29.22],[20.58,30.4]])
GRID = COMP([INSR(PROD),AA(QUOTE)])

def circle(r):
	def circle0(p):
		alpha = p[0]
		return [r*COS(alpha), r*SIN(alpha)]
	return circle0



def circle (r):
	def circ (p):
		return ([r*COS(p[0]),r*SIN(p[0])])
	return circ

dom = INTERVALS(PI)(36)

dom2 = INTERVALS(PI)(24)

def ring(r,R):
	def circle (r):
		def c(p):
			return [r*math.cos(p[0]),r*math.sin(p[0])]
		return c
	esterno = MAP(circle(R))(dom)
	interno = MAP(circle(r))(dom)	
	return STRUCT([esterno,interno])

floor2cont =  POLYLINE([[6.78,30.4],[6.23,30.4],[6.23,27.95],[2.51,27.95],[2.51,22.27],[6.23,22.27],[6.23,18.48],[5.68,18.48],[5.68,15.95],[5.13,15.95],[5.13,15.4],[5.68,15.4],[5.68,13.42],[5.13,13.42],[5.13,12.87],[5.68,12.87],[5.68,10.89],[5.13,10.89],[5.13,10.34],[5.68,10.34],[5.68,7.81],[5.13,7.81],[5.13,7.26],[5.68,7.26],[5.68,4.73],[5.13,4.73],[5.13,4.18],[5.68,4.18],[5.68,1.1],[5.13,1.1],[5.13,0.55],[5.68,0.55],[5.68,0],[6.23,0],[6.23,0.55],[11.23,0.55],[11.23,0],[12.23,0],[12.23,0.55],[12.53,0.55],[12.53,1.1],[9.86,1.1],[9.86,1.65],[9.31,1.65],[9.31,1.1],[6.23,1.1],[6.23,4.18],[6.78,4.18],[6.78,4.73],[6.23,4.73],[6.23,7.26],[6.78,7.26],[6.78, 7.81],[6.23,7.81],[6.23,10.34],[6.78,10.34],[6.78,10.89],[6.23,10.89],[6.23,15.35],[6.78,15.35],[6.78,15.9],[6.23,15.9],[6.23,17.86],[6.78,17.86],[6.78,24.67],[6.23,24.67],[6.23,24.12],[5.68,24.12],[5.68,23.28],[4.28,23.28],[4.28,24.12],[3.73,24.12],[3.73,24.67],[3,24.67],[3,26.07],[3.73,26.07], [3.73,26.62],[4.28,26.62],[4.28,27.2],[5.68,27.2], [5.68, 26.62],[6.23,26.62],[6.23,26.07], [6.78,26.07],[6.78,30.4]])

floor2cont2 =  POLYLINE([[14.03,0],[14.03,0.55],[13.73,0.55],[13.73,1.1],[16.43,1.1],[16.43,1.65],[16.95,1.65],[16.95,1.1],[19.95,1.1],[19.95,4.18],[19.4,4.18],[19.4,4.73],[19.95,4.73],[19.95,7.26],[19.4,7.26],[19.4,7.81],[19.95,7.81],[19.95,10.34],[19.4,10.34],[19.4,10.89],[19.95,10.89],[19.95,15.4],[19.4,15.4],[19.4,15.95],[19.95,15.95],[19.95,18.4],[19.4,18.4],[19.4,25.56],[19.95,25.56],[19.95,22.4],[25.21,22.4],[24.66,28.44],[24.11,28.44],[24.11,29.22],[25,29.22]])
floor2cont3 =  POLYLINE([[14.03,0],[15.03,0],[15.03,0.55],[20.03,0.55],[20.03,0],[20.58,0],[20.58,0.55],[21.13,0.55],[21.13,1.1],[20.58,1.1],[20.58,15.95],[21.13,15.95],[21.13,15.4],[20.58,15.4],[20.58,13.42],[21.13,13.42],[21.13,12.87],[20.58,12.87],[20.58,10.89],[21.13,10.89],[21.13,10.34],[20.58,10.34],[20.58,7.81],[21.13,7.81],[21.13,7.26],[20.58,7.26],[20.58,4.73],[21.13,4.73],[21.13,4.18],[20.58,4.18],[20.58,18.48],[21.84,18.48],[21.84,21.78],[26.75,21.78],[26.75,22.33],[26.2,22.33],[25.65,28.37],[25.65,30.41],[26,30.41],[26,30.76],[25.13,30.76],[25.13,29.22]])



floor2cont4 = POLYLINE([[22.1,29.22],[22.1,28.44],[21.2,28.44],[21.2,27.89],[19.95,27.89],[19.95,27.34],[19.4,27.34],[19.4,27.89],[18.85,27.89],[18.85,28.44],[19.4,28.44],[19.4,30.7]])
floor2cont5 = POLYLINE([[22.1,29.22],[20,29.22],[20,30.7],[19.4,30.7]])



circ1 = SOLIDIFY(ring(6.3,6.9))  # SEMICERCHIO GRANDE STRUTTURA
circ1=T([1,2])([13.1,30.4])(circ1)

CIRC1=MAP(circle(6.9))(dom2)
CIRC1=T([1,2])([13.1,30.4])(CIRC1)

circ2 =  SOLIDIFY(ring(1,1.97))  # SEMICERCHIO PIU A DESTRA (NAVATA)

circ2 = T([1,2])([23.1,29.22])(circ2)
CIRC2=MAP(circle(1.97))(dom2)
CIRC2 = T([1,2])([23.1,29.22])(CIRC2)

floor2cont3 = (STRUCT([floor2cont2,floor2cont3,floor2cont5,floor2cont4]))

floor2cont3=SOLIDIFY(floor2cont3)


circ3 =  SOLIDIFY(ring(1.5,1.86))  # SEMICERCHIO CENTRALE
CIRC3=MAP(circle(1.86))(dom2)
CIRC3 = T([1,2])([13.4,36.9])(CIRC3)


circ3 = T([1,2])([13.4,36.9])(circ3)

floor14 = STRUCT([fl1,circ1, circ2])



circ5 =  SOLIDIFY(ring(1.5,1.86))  # SEMICERCHIO A DESTRA

circ5= R([1,2])(-PI/3)(circ5)

circ5 = T([1,2])([18.5,34])(circ5)

CIRC5=MAP(circle(1.86))(dom2)
CIRC5= R([1,2])(-PI/3)(CIRC5)

CIRC5 = T([1,2])([18.5,34])(CIRC5)


circ4 = SOLIDIFY(ring(1.5,1.86))

circ4= R([1,2])(PI/3)(circ4)
circ4 = T([1,2])([7.9,34])(circ4)
CIRC4=MAP(circle(1.86))(dom2)
CIRC4= R([1,2])(PI/3)(CIRC4)
CIRC4 = T([1,2])([7.9,34])(CIRC4)


b = QUOTE([0.55,-2.53]*4)
c = QUOTE([0.55, -6.67, 0.55])
aaa=PROD([b,c])
aaa=R([1,2])(PI/2)(aaa)
aaa=T([1,2])([17,1.1])(aaa)

aa=QUOTE([0.55])
bb=QUOTE([1.65, -5.57, 1.65])

bbb = T([1])(0.55)(PROD([aa,bb]))
cc=QUOTE([1.65])

ccc=T([2])(0.55)(PROD([cc,c]))
x = STRUCT([ccc, bbb])

x = R([1,2])(-PI/2)(x)

x = T([1,2])([8.56,14])(x)  # croce completa


pair_x = [T(2)(10.68), x]
houseRow = STRUCT(NN(1)(pair_x))

pair_x2 = [T(2)(13.77), x]

houseRow2 = STRUCT(NN(1)(pair_x2))



tresopra = QUOTE([0.55,-1.68]*3)
tresopra=PROD([tresopra,c])
tresopra=R([1,2])(PI/2)(tresopra)
tresopra=T([1,2])([17,16])(tresopra)

zzz = PROD([aa,c])
zzz= R([1,2])(-PI/2)(zzz)
zzz= T([1,2])([8.9,31])(zzz)




z1 = PROD([aa,aa])
z1= R([1,2])(-PI/4)(z1)


pair_xx = [T(1)(5), z1]
houseRowxx = STRUCT(NN(2)(pair_xx))
houseRowxx= T([1,2])([5,33.3])(houseRowxx)

z2 = PROD([aa,aa])
pair_xy = [T(1)(2), z2]
houseRowxy = STRUCT(NN(2)(pair_xy))
houseRowxy= T([1,2])([9.7,34.7])(houseRowxy)


interno= STRUCT([x, aaa, tresopra, houseRow, houseRow2, zzz, houseRowxx, houseRowxy])




floor1 = STRUCT([circ2, circ1, floor2cont2, circ3, circ5, circ4, SOLIDIFY(floor2cont),interno, floor2cont3])


VIEW(floor1)


floor12D2 = STRUCT([fl1, CIRC2, CIRC4, CIRC5, CIRC3])
floor125D = STRUCT([SOLIDIFY(floor12D2), JOIN(CIRC1)])





floor0 = GRID([[28],[40]])



fl = PROD([floor125D,Q(1)])



two_and_half_model=STRUCT([floor0, fl])
VIEW(two_and_half_model)   #2,5D Model



